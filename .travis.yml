language: python
env:
- DJANGO_VERSION='>=1.11,<1.12'
- DJANGO_VERSION='>=2.2,<2.3'
- DJANGO_VERSION='>=3.1,<3.2'
- DJANGO_VERSION='>=3.2,<3.3'
- DJANGO_VERSION='>=4.0,<4.1'
- DJANGO_VERSION=''
python:
- '2.7'
- '3.6'
- '3.7'
- '3.8'
- '3.9'
before_install:
- sudo apt-get install -y librrd-dev
install:
- pip install Django$DJANGO_VERSION
- pip install -r requirements.txt
script:
- python setup.py test
jobs:
  exclude:
  - python: '2.7'
    env: DJANGO_VERSION='>=2.2,<2.3'
  - python: '2.7'
    env: DJANGO_VERSION='>=3.1,<3.2'
  - python: '2.7'
    env: DJANGO_VERSION='>=3.2,<3.3'
  - python: '2.7'
    env: DJANGO_VERSION='>=4.0,<4.1'
  - python: '2.7'
    env: DJANGO_VERSION=''
  - python: '3.6'
    env: DJANGO_VERSION='>=1.11,<1.12'
  - python: '3.6'
    env: DJANGO_VERSION='>=4.0,<4.1'
  - python: '3.7'
    env: DJANGO_VERSION='>=1.11,<1.12'
  - python: '3.7'
    env: DJANGO_VERSION='>=4.0,<4.1'
  - python: '3.8'
    env: DJANGO_VERSION='>=1.11,<1.12'
  - python: '3.9'
    env: DJANGO_VERSION='>=1.11,<1.12'
  include:
  - stage: deploy
    script: skip
    python: '3.6'
    deploy:
      provider: pypi
      user: __token__
      password:
        secure: 0tHID9eI5xIABFBu+UZ4gRLOov29jj8jEsnFqVgbO52y5GvjHT595lZxfXRQip7Zn6HaaBksqIDPCjO3P8oubB/jAB/8q63X8WwSHMSQ6JB70wHx6fx4XSCzazYdf14zbs4KOa/qldnL5qXFbyQNnNFCuEBDYJVFSSdgB15OTZsIUf9C+e06p5kXOUCanNW3YxZf/bETspdvZZJba+76y3k8aegO69izMHq6HKp5muJD4ya/UzkuB01+TLjiGxsrFkdS83L2y731L5PmDqJDb2rPzzJen3WAkvGq6D6Zm9XuBeAqJhbltTLdwAdmW1UOUTJbffR5nfKWtD8PU6pRu+Eg2115s1wzvSiVoHpflowXIJXs74wxt579AWy5vW9InRmxq5vQstFcnqiOteLVfZpUXMxld+1tTQ2Pfvt2XCMV7/3UkBdNHoWQvG4Mca8M3ox5UdntE4MVz/HHl/EEntD4q2XFjG2DFmr0LIvlZVbG2PambfrU9WSWaCGOxToTo95dcm0fWIXfAMLBxoznG+rlWA4pv7Q0r2oJOobWX5Lmvmdj9kQ483pi8gJW26rOY7xb4544IxAhzgDxGfFICBg6T4jxylnB2s3GYxz3N6IGesQUc1jS1ur0ip9EAaoJJ0YaIf4XCYTirJJ519SUkZ5DCvYtJx8gl1QkgT72bwc=
      skip_existing: true
      distributions: sdist bdist_wheel
      on:
        tags: true
